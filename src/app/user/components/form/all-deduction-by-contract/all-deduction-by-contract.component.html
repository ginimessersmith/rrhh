<div class="mt-2">
  <form [formGroup]="idContractForm" (ngSubmit)="onAllDeductions()" action="">
    <div class="d-flex gap-2 justify-content-between align-items-center">
      <mat-form-field class="w-75">
        <mat-label>Seleccione un contrato</mat-label>
        <mat-select formControlName="id">
          <mat-option
          *ngFor="let item of allContract"
          [value]="item.id"
          >
            Empleado: {{item.employee.names}} {{item.employee.last_names}}, {{item.contractType.type}} - {{item.base_salary}}, Cargo: {{item.position.position}}
          </mat-option>
        </mat-select>
        <mat-error>Debe elegir un contrato</mat-error>
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit" (click)="onAllDeductions()">Ver</button>
    </div>
  </form>
</div>
<div class="mt-2">
  <table mat-table [dataSource]="allDeduction" class="mat-elevation-z8">

    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef>Monto</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.amount}}</td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Descripcion</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.description}}</td>
    </ng-container>

    <ng-container matColumnDef="contract_start_date">
      <th mat-header-cell *matHeaderCellDef>Inicio del contrato</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.start_date |date}}</td>
    </ng-container>

    <ng-container matColumnDef="contract_end_date">
      <th mat-header-cell *matHeaderCellDef>Fin del contrato</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.end_date |date}}</td>
    </ng-container>

    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef>Cargo</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.position.position}}</td>
    </ng-container>

    <ng-container matColumnDef="employee">
      <th mat-header-cell *matHeaderCellDef>Empleado</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.employee.names}}
        {{deduction.contract.employee.last_names}}</td>
    </ng-container>

    <ng-container matColumnDef="department">
      <th mat-header-cell *matHeaderCellDef>Departamento</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.position.departmentBranch.department.department}}
      </td>
    </ng-container>

    <ng-container matColumnDef="branch">
      <th mat-header-cell *matHeaderCellDef>Sucursal</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.position.departmentBranch.branch.branch}}</td>
    </ng-container>

    <ng-container matColumnDef="contract_type">
      <th mat-header-cell *matHeaderCellDef>Tipo de contrato</th>
      <td mat-cell *matCellDef="let deduction">{{deduction.contract.contractType.type}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
    <tr mat-row *matRowDef="let row; columns:displayColumns;"></tr>

  </table>
</div>
